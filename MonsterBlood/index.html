<!doctype html>
<html lang="en" ng-app="monsterBloodApp">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Monster Blood</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
	<script>
		var monsterBloodApp = angular.module('monsterBloodApp', []);	
		monsterBloodApp.controller('MonsterBloodCtrl', function ($scope) {
			$scope.monsters = [];
			$scope.add = true;
			$scope.editmax = false;
			$scope.statuses = ['heart','tint','fire'];

			$scope.adjust = function(amount) {
				var field = $scope.editmax ? 'max' : 'current';
				$scope.editable[field] = $scope.editable[field] + amount * ($scope.add ? 1 : -1);
			};
			$scope.cycleStatus = function(){
				$scope.editable.status++;
				$scope.editable.status %= $scope.statuses.length;
			}
			$scope.removeMonster = function(){
				$scope.monsters.pop();
			}
			$scope.addMonster = function(){
				$scope.monsters.push({current:10, max:10, status:0})
			};
			$scope.setEditable = function(monsterIndex) {
				$scope.editableIndex = monsterIndex;
				$scope.editable = $scope.monsters[monsterIndex];
			}
			
			
			$scope.addMonster();
			$scope.addMonster();
			$scope.addMonster();
		});
	</script>
	<style>
		body {
			padding: 5px;
		}
		.row-spaced {
			margin-bottom: 5px;
		}
		.well-bottomless {
			margin-bottom: 0px;
		}
		.btn {
			width:100%;
			padding: 10px 0px;
		}
		.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-6,.col-xs-12 {
			padding-right: 1px;
			padding-left: 1px;
		}
	</style>
</head>
<body ng-controller="MonsterBloodCtrl">
	<div class="container-fluid">
		<div class="row row-spaced">
			<div class="col-xs-4">
				<button class="btn btn-default" ng-click="monsters.pop()" ng-disabled="monsters.length == 0">Fewer</button>
			</div>
			<div class="col-xs-4">
				<button class="btn btn-default" ng-click="addMonster()">More</button>
			</div>
			<div class="col-xs-4">
				<button class="btn btn-default" ng-click="showhelp = !showhelp">{{showhelp ? 'Hide Help' : 'Help'}}</button>
			</div>
		</div>
		<div class="row row-spaced" ng-show="showhelp">
			<div class="well well-bottomless">
				<strong>Help</strong>
				<ul>
					<li>More/Fewer - add remove rows (monsters)</li>
					<li>Max HP/Current HP - toggles which health value you are editing for the given monster. Red = current, Orange = max</li>
					<li>Clicking on the monster (red/orange button) - cycles through status icons</li> 
				</ul>
			</div>
		</div>
		<div class="row row-spaced" ng-repeat="monster in monsters">
			<div class="col-xs-12">
				<button class="btn" ng-class="editmax ? 'btn-warning' : 'btn-danger'" ng-disabled="$index === editableIndex" ng-click="setEditable($index)">
					{{$index+1}}
					<span class="glyphicon glyphicon-{{statuses[monster.status]}}"></span>
					{{monster.current}} / {{monster.max}}
				</button>
			</div>
		</div>

		<div class="row row-spaced">
			<div class="col-xs-4">
				<button class="btn" ng-class="add ? 'btn-info' : 'btn-default'" ng-click="add = !add" >+</button>
			</div>
			<div class="col-xs-4">
				<button class="btn" ng-class="add ? 'btn-default' : 'btn-info'" ng-click="add = !add" >-</button>
			</div>
			<div class="col-xs-4">
				<button class="btn btn-default" ng-click="editmax = !editmax">{{editmax ? 'Max HP' : 'Current HP'}}</button>
			</div>
		</div>

		<div class="row row-spaced">
			<div ng-repeat="i in [1,2,3,4,5,6]" class="col-xs-2">
				<button class="btn btn-default" ng-click="adjust(i)">{{add ? '+' : '-'}}{{i}}</button>
			</div>
		</div>
		<div class="row row-spaced">
			<div ng-repeat="i in [7,8,9,10,20]" class="col-xs-2">
				<button class="btn btn-default" ng-click="adjust(i)">{{add ? '+' : '-'}}{{i}}</button>
			</div>
			<div class="col-xs-2">
				<button class="btn btn-default" ng-click="cycleStatus()">o</button>
			</div>
		</div>
	
	</div>
</body>
</html>