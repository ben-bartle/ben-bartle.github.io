<!doctype html>
<html lang="en" ng-app="monsterBloodApp">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Monster Blood</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
	<script>
		var monsterBloodApp = angular.module('monsterBloodApp', []);	
		monsterBloodApp.controller('MonsterBloodCtrl', function ($scope) {
			$scope.monsters = [];

			$scope.editmax = false;
			$scope.statuses = ['heart','tint','fire'];

			$scope.adjust = function(monster,amount) {
				var field = $scope.editmax ? 'max' : 'current';
				monster[field] = monster[field] + amount;
			};
			$scope.cycleStatus = function(monster){
				monster.status++;
				monster.status %= $scope.statuses.length;
			}
			$scope.removeMonster = function(){
				$scope.monsters.pop();
			}
			$scope.addMonster = function(){
				$scope.monsters.push({current:10, max:10, status:0})
			};

			
			$scope.addMonster();
			$scope.addMonster();
			$scope.addMonster();
		});
	</script>
	<style>
		body {
			padding: 5px;
		}
		.row-spaced {
			margin-bottom: 5px;
		}
		.well-bottomless {
			margin-bottom: 0px;
		}
	</style>
</head>
<body ng-controller="MonsterBloodCtrl">
	<div class="container-fluid">
		<div class="row row-spaced">
			<div class="btn-toolbar">
				<div class="btn-group">
					<button class="btn btn-default" ng-click="monsters.pop()" ng-disabled="monsters.length == 0">Fewer</button>
					<button class="btn btn-default" ng-click="addMonster()">More</button>
				</div>
				<div class="btn-group">
					<button class="btn btn-default" ng-click="editmax = !editmax">{{editmax ? 'Max HP' : 'Current HP'}}</button>
				</div>
				<div class="btn-group">
					<button class="btn btn-default" ng-click="showhelp = !showhelp">{{showhelp ? 'Hide Help' : 'Help'}}</button>
				</div>
			</div>
		</div>
		<div class="row row-spaced" ng-show="showhelp">
			<div class="well well-bottomless">
				<strong>Help</strong>
				<ul>
					<li>More/Fewer - add remove rows (monsters)</li>
					<li>Max HP/Current HP - toggles which health value you are editing for the given monster. Red = current, Orange = max</li>
					<li>Clicking on the monster (red/orange button) - cycles through status icons</li> 
				</ul>
			</div>
		</div>
		<div class="row row-spaced" ng-repeat="monster in monsters">
			<div class="btn-toolbar">
				<div class="btn-group">
					<button class="btn btn-default" ng-click="adjust(monster,-10)">-10</button>
					<button class="btn btn-default" ng-click="adjust(monster,-5)">-5</button>
					<button class="btn btn-default" ng-click="adjust(monster,-1)">-1</button>
				</div>
				
				<div class="btn-group">
					<button class="btn" ng-class="editmax ? 'btn-warning' : 'btn-danger'"  ng-click="cycleStatus(monster)">
						{{$index+1}}
						<span class="glyphicon glyphicon-{{statuses[monster.status]}}"></span>
						{{monster.current}} / {{monster.max}}
					</button> 
				</div>
				
				<div class="btn-group">
					<button class="btn btn-default" ng-click="adjust(monster,1)">+1</button>
					<button class="btn btn-default" ng-click="adjust(monster,5)">+5</button>
					<button class="btn btn-default" ng-click="adjust(monster,10)">+10</button>
				</div>
			</div>
		</div>
	</div>
</body>
</html>